(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4a68e19b"],{"278c":function(e,t,i){var n=i("c135"),a=i("9b42"),l=i("c240");function r(e,t){return n(e)||a(e,t)||l()}e.exports=r},"5d04":function(e,t,i){},"9b42":function(e,t){function i(e,t){var i=[],n=!0,a=!1,l=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),t&&i.length===t)break}catch(o){a=!0,l=o}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw l}}return i}e.exports=i},b8ef:function(e,t,i){"use strict";var n=i("5d04"),a=i.n(n);a.a},c135:function(e,t){function i(e){if(Array.isArray(e))return e}e.exports=i},c240:function(e,t){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}e.exports=i},fa49:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"page-frame"},[i("div",{staticClass:"text-h6 q-py-md"},[e._v("\n    Upload Meme\n  ")]),e.loggedIn?i("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit(t)}}},[i("q-input",{ref:"memeTitle",attrs:{outlined:"",label:"Enter a title...",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.memeTitle,callback:function(t){e.memeTitle=t},expression:"memeTitle"}}),i("div",{attrs:{id:"dropbox"}},[i("q-input",{attrs:{id:"new-meme-input",outlined:"",type:"file",accept:"image/*",clearable:""},on:{change:e.fileChosen},model:{value:e.fileInput,callback:function(t){e.fileInput=t},expression:"fileInput"}}),i("q-input",{ref:"fileName",attrs:{id:"new-meme-facade",outlined:"",label:"Choose file...",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),i("q-item",[i("img",{attrs:{id:"new-meme-preview"}})]),i("q-btn",{staticClass:"full-width",attrs:{label:"Upload",color:"primary",type:"submit"}})],1):i("div",{staticClass:"text-body1"},[e._v("\n    You must be logged in to adjust settings.\n  ")])])},a=[],l=(i("7f7f"),i("278c")),r=i.n(l),s=i("3156"),o=i.n(s),u=i("2f62"),c="kingwizard",f="h4c8kn5g",m={name:"PageNewMeme",data:function(){return{file:null,fileName:null,fileInput:null,memeTitle:null,accept:!1}},computed:o()({},Object(u["b"])(["loggedIn"])),watch:{loggedIn:function(e){e||this.$router.push({name:"main"})}},methods:{fileChosen:function(e){var t=e.target,i=document.getElementById("new-meme-preview"),n=new FileReader;n.onload=function(){i.src=n.result};try{var a=r()(t.files,1);this.file=a[0],this.fileName=this.file.name,n.readAsDataURL(this.file)}catch(l){this.fileName="",i.src=""}},onSubmit:function(){this.$refs.memeTitle.validate(),this.$refs.fileName.validate(),this.$refs.memeTitle.hasError||this.$refs.fileName.hasError?this.formHasError=!0:(this.uploadFile(),this.memeTitle=null,this.file=null,this.fileName=null,this.fileInput=null,document.getElementById("new-meme-preview").src="",this.$q.notify({icon:"cloud_upload",color:"info",message:"Uploading"}),window.setTimeout(this.reset,100))},reset:function(){this.$refs.memeTitle.resetValidation(),this.$refs.fileName.resetValidation()},uploadFile:function(){var e="https://api.cloudinary.com/v1_1/".concat(c,"/upload"),t=new XMLHttpRequest,i=new FormData;t.open("POST",e,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest");var n=this.$socket,a=this.memeTitle,l=this.$q,r=this.$router;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);n.emit("addMeme",{title:a,cloudinaryUrl:e.secure_url},function(e){e.isSuccessful&&(l.notify({icon:"done",color:"positive",message:"Meme created"}),r.push({name:"meme",params:{memeId:e.value.memeId}}))})}},i.append("upload_preset",f),i.append("tags","browser_upload"),i.append("file",this.file),t.send(i)}}},d=m,p=(i("b8ef"),i("2877")),h=Object(p["a"])(d,n,a,!1,null,null,null);t["default"]=h.exports}}]);